<%- include("partials/header.ejs") %>

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bhagavad Gita - TWISH</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-aFq/bzH65dt+w6FI2ooMVUpc+21e0SRygnTpmBvdBgSdnuTN7QbdgL+OapgHtvPp" crossorigin="anonymous">
  <link rel="stylesheet" href="/styles/main.css">
</head>
<body>
<div class="container my-4 mt-5">
  <div class="card p-4 vercesText" style="border: 1px solid #A27B5C;">
    <h1 style="color: #A27B5C;">Bhagavad Gita: Path to Emotional Balance</h1>
    <br>
    <h3 class="mb-3" style="color: #A27B5C; font-weight: 500;">ðŸ“– Unlock lessons from the Gita for calm, focus, and personal growth.</h3>

    <!-- Chapter List -->
    <ul class="list-group mb-4">
      <% chapters.forEach(chapter => { %>
        <li class="list-group-item">
          <a href="/gita?chapter=<%= chapter.chapter_number %>">
            <strong><%= chapter.name_meaning || "No Name" %></strong> - Chapter <%= chapter.chapter_number %>
          </a>
        </li>
      <% }); %>
    </ul>

    <!-- Chapter Detail (if selected) -->
<% if (chapterDetail) { %>
  <hr>
  <h4>Chapter <%= chapterDetail.chapter_number %>: <%= chapterDetail.name_meaning || "No Name" %></h4>
  <p><strong>Summary:</strong> <%= chapterDetail.chapter_summary || "Summary not available." %></p>
  <p><strong>Number of Verses:</strong> <%= chapterDetail.verses_count || "Unknown" %></p>

  <% verses.forEach(verse => { %>
    <div class="card mb-3 p-3" style="border: 1px solid #ccc;">
      <p><strong>Verse <%= verse.verse_number %>:</strong> <%= verse.text %></p>

      <% if (verse.translations && verse.translations.length > 0) { %>
        <% const sivanandatranslations = verse.translations.filter(c => c.author_name === "Swami Sivananda"); %>
        <% if (sivanandatranslations.length > 0) { %>
     <h6 style="font-weight: bold;">translations:</h6>
       <ul>
         <% sivanandatranslations.forEach(trans => { %>
          <li>
          <em><%= trans.description %></em> â€” <%= trans.author_name %>
          </li>
        <% }) %>
        </ul>
  <% } %>
<% } %>

      <% if (verse.commentaries && verse.commentaries.length > 0) { %>
        <% const sivanandaComments = verse.commentaries.filter(c => c.author_name === "Swami Sivananda"); %>
        <% if (sivanandaComments.length > 0) { %>
     <h6 style="font-weight: bold;">Commentaries:</h6>
       <ul>
         <% sivanandaComments.forEach(comment => { %>
          <li>
          <em><%= comment.description %></em> â€” <%= comment.author_name %>
          </li>
        <% }) %>
        </ul>
  <% } %>
<% } %>
    </div>
  <% }) %>
<% } %>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-ndDqU0Gzau9qJ1lfW4pNLlhNTkCfHzAVBReH9diLvGRem5+R9g2FzA8ZGN954O5Q" crossorigin="anonymous"></script>

<%- include("partials/footer.ejs") %>
</body>
</html>
